set flag for threads
{ final string flag column = get column name for flag flag do batch set selection new batch set selection { override public int get list size { return thread root ids size } override public string get list item int index { return long to string thread root ids get index } override public void do db work sqlite database db string selection set string selection args throws unavailable storage exception { db exec sql update messages set " + flag column + " = " + new state ? "1" : "0") + " where id in (" + select m id from threads t " + left join messages m on t message id = m id " + where m empty = 0 and m deleted = 0 " + and t root + selection set + ")", selection args } override public void post db work { notify change } }, thread flag update batch size

