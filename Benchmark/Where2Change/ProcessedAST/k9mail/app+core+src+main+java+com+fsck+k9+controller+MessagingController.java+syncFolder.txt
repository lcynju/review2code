sync folder
{ server settings server settings = account get incoming server settings if server settings is missing credentials { handle authentication failure account true return } exception command exception = null try { process pending commands synchronous account } catch exception e { timber e e failure processing command but allow message sync attempt command exception = e } local folder local folder try { local store local store = local store provider get instance account local folder = local store get folder folder id local folder open } catch messaging exception e { timber e e sync folder couldn t load local folder d folder id return } if local folder is local only { return } message store message store = message store manager get message store account long last checked = message store get folder folder id folder details accessor get last checked boolean suppress notifications = last checked == null string folder server id = local folder get server id sync config sync config = create sync config account controller sync listener sync listener = new controller sync listener account listener suppress notifications backend sync folder server id sync config sync listener if command exception != null && sync listener sync failed { string root message = get root cause message command exception timber e root cause failure in s s was s account get description folder server id root message update folder status account folder server id root message listener synchronize mailbox failed account folder id root message }}
// we can t sync local folders
